@using HomeAssistant.Core.Models.Recipe
@using HomeAssistant.Infrastructure.Data.Enums
@model RecipeDetaislViewModel

<link rel="stylesheet" href="~/css/recipe.css" asp-append-version="true" />

<div class="recipe-img">
	@if (Model.Photo != null && Model.Photo.Length > 0)
	{
		<img src="data:image/jpeg;base64,@Convert.ToBase64String(Model.Photo)" />
	}
	else
	{
		<p>No image!</p>
	}
</div>

<h2>@Model.Name</h2>
<p>@Model.Description</p>
<h3>Ingredients:</h3>
<ul>
	@foreach (var product in Model.Products)
	{
		<li>@product</li>
	}
</ul>
<h3>Add steps for preparing the dish:</h3>
<div class="steps">
	@{
		int counter = 1;
		foreach (var step in Model.Steps)
		{
			<div class="step">
				<p>Step @(counter++):</p>
				@switch (@step.Type)
				{
					case StepType.NormalStep:
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.1 by - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M192 0c-41.8 0-77.4 26.7-90.5 64H64C28.7 64 0 92.7 0 128V448c0 35.3 28.7 64 64 64H320c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64H282.5C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16H304c8.8 0 16 7.2 16 16s-7.2 16-16 16H176c-8.8 0-16-7.2-16-16z" /></svg>
						break;
					case StepType.TimerStep:
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--!Font Awesome Free 6.5.1 by - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M32 0C14.3 0 0 14.3 0 32S14.3 64 32 64V75c0 42.4 16.9 83.1 46.9 113.1L146.7 256 78.9 323.9C48.9 353.9 32 394.6 32 437v11c-17.7 0-32 14.3-32 32s14.3 32 32 32H64 320h32c17.7 0 32-14.3 32-32s-14.3-32-32-32V437c0-42.4-16.9-83.1-46.9-113.1L237.3 256l67.9-67.9c30-30 46.9-70.7 46.9-113.1V64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320 64 32zM96 75V64H288V75c0 19-5.6 37.4-16 53H112c-10.3-15.6-16-34-16-53zm16 309c3.5-5.3 7.6-10.3 12.1-14.9L192 301.3l67.9 67.9c4.6 4.6 8.6 9.6 12.1 14.9H112z" /></svg>
						break;
				}
				<p>@step.Name</p>

				<a class="btn btn-warning" asp-controller="Recipe" asp-action="EditStep">Edit</a>
			</div>
			<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.1 by  - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z" /></svg>
		}
	}
	<div class="new-step">
		<div class="dropdown">
			<button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
				Add Recipe Step
			</button>
			<ul class="dropdown-menu">
				@foreach (var option in Enum.GetValues(typeof(StepType)))
				{
					<li>
						<a class="dropdown-item" asp-controller="Recipe" asp-action="Add@(option.ToString())" asp-route-recipeId="@Model.Id">
							@option.ToString()
						</a>
					</li>
				}
			</ul>

		</div>
	</div>

</div>
